#!/bin/sh
EXTERNAL_OUTPUT=$(xrandr |grep -i " connected"|grep "HDMI"|awk '{print $1}')
INTERNAL_OUTPUT=$(xrandr |grep -i " connected"|grep "DP"|awk '{print $1}')
NR_SCREENS_CONNECTED=$(xrandr | grep " connected " | awk '{ print$1 }' |wc -l)

if [ $NR_SCREENS_CONNECTED -lt 2 ]
then 
    ~/.screenlayout/laptop.sh
else
    choices="Laptop\nExternal\nJoin Display\nDuplicate\nOffice"

    chosen=$(echo "$choices" | dmenu -i)

    case "$chosen" in
        Laptop) ~/.screenlayout/laptop.sh;;
        External) ~/.screenlayout/external.sh;;
        "Join Display")
            side="External Right\nExternal Left"
            chosen_side=$(echo "$side"| dmenu -i)
            case "$chosen_side" in
                "External Right") ~/.screenlayout/join_right.sh;;
                "External Left") ~/.screenlayout/join_left.sh;;
            esac;;
        Duplicate) ~/.screenlayout/external.sh;;
        Office) ~/.screenlayout/office.sh;;

    esac
fi

xmonad --restart
feh --no-fehbg --bg-scale  ~/Pictures/wallpaper.jpeg
sleep 2
~/.config/polybar/launch.sh
# killall picom; picom --experimental-backends -b
