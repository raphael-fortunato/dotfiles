#!/bin/sh
NR_SCREENS_CONNECTED=$(xrandr | grep " connected " | awk '{ print$1 }' |wc -l)

if [ $NR_SCREENS_CONNECTED -lt 2 ]
then 
    ~/.screenlayout/laptop.sh
else
    choices="Laptop\nExternal\nJoin Display\nDuplicate\nOffice"

    chosen=$(echo -e "$choices" | dmenu -i )

    case "$chosen" in
        Laptop) ~/.screenlayout/laptop.sh;;
        External) ~/.screenlayout/external.sh;;
        "Join Display")
            side="Right\nLeft"
            chosen_side=$(echo -e "$side"| dmenu -i -p "Place External to the: ")
            case "$chosen_side" in
                "Right") ~/.screenlayout/join_right.sh;;
                "Left") ~/.screenlayout/join_left.sh;;
            esac;;
        Duplicate) ~/.screenlayout/external.sh;;
        Office) ~/.screenlayout/office.sh;;

    esac
fi

xmonad --restart
feh --no-fehbg --bg-scale  ~/Pictures/wallpaper.jpeg
sleep 2
~/.config/polybar/launch.sh
# killall picom; picom --experimental-backends -b
